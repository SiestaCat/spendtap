<div>
  <!-- Botones de navegación -->
  <div class="flex items-center justify-between mb-6">
    <!-- Botón volver -->
    <button id="backToMonthBtn" type="button" class="inline-flex items-center gap-2 rounded-2xl px-4 py-2 text-sm font-medium ring-1 ring-slate-300 dark:ring-slate-700 bg-white dark:bg-slate-800 shadow hover:shadow-md transition">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"/></svg>
      <span data-i18n="buttons.backToMonth">Volver al mes</span>
    </button>
    
    <!-- Botón desglose anual -->
    <button id="yearlyBreakdownBtn" type="button" class="inline-flex items-center gap-2 rounded-2xl px-4 py-2 text-sm font-medium bg-orange-600 text-white shadow hover:bg-orange-700 active:scale-95 transition-all">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" class="w-4 h-4">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
        <line x1="16" y1="2" x2="16" y2="6"/>
        <line x1="8" y1="2" x2="8" y2="6"/>
        <line x1="3" y1="10" x2="21" y2="10"/>
      </svg>
      <span data-i18n="breakdown.yearlyButton">Desglose anual</span>
    </button>
  </div>

  <!-- Título -->
  <div class="mb-6 text-center">
    <h1 class="text-2xl font-bold text-slate-900 dark:text-slate-100" data-i18n="breakdown.monthlyTitle">Desglose mensual</h1>
    <p id="breakdown-period" class="text-slate-600 dark:text-slate-400 mt-1">Octubre 2025</p>
  </div>

  <!-- Resumen del mes -->
  <div class="mb-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl">
    <h3 class="text-lg font-semibold mb-3" data-i18n="month.summary">Resumen del mes</h3>
    <div class="grid grid-cols-3 gap-4">
      <div class="text-center">
        <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="month.totalIncome">Total ingresos</p>
        <p class="text-xl font-bold text-green-600" id="breakdown-total-income">0,00€</p>
      </div>
      <div class="text-center">
        <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="month.totalExpenses">Total gastos</p>
        <p class="text-xl font-bold text-red-600" id="breakdown-total-expenses">0,00€</p>
      </div>
      <div class="text-center">
        <p class="text-sm text-slate-600 dark:text-slate-400" data-i18n="month.balance">Balance total</p>
        <p class="text-xl font-bold" id="breakdown-total-balance">0,00€</p>
      </div>
    </div>
  </div>

  <!-- Balance al final del mes -->
  <div class="mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border border-blue-200 dark:border-blue-700">
    <h3 class="text-lg font-semibold mb-3 text-blue-900 dark:text-blue-100" data-i18n="breakdown.endOfMonth">Balance al final del mes</h3>
    <div class="text-center">
      <p class="text-sm text-blue-700 dark:text-blue-300 mb-1" data-i18n="breakdown.totalBalanceEndMonth">Balance total al último día del mes</p>
      <p class="text-2xl font-bold" id="breakdown-end-balance">0,00€</p>
    </div>
  </div>

  <!-- Filtro por categorías -->
  <div class="mb-6 p-4 bg-slate-50 dark:bg-slate-800/50 rounded-2xl">
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-lg font-semibold" data-i18n="filter.title">Filtrar por categorías</h3>
      <button id="breakdown-clear-filters-btn" type="button" class="text-sm text-indigo-600 hover:text-indigo-800 dark:text-indigo-400 dark:hover:text-indigo-300 transition-colors hidden">
        <span data-i18n="filter.clearAll">Limpiar filtros</span>
      </button>
    </div>
    
    <!-- Categorías seleccionadas -->
    <div id="breakdown-selected-categories" class="flex flex-wrap gap-2 mb-3 hidden">
      <!-- Las categorías seleccionadas aparecerán aquí -->
    </div>
    
    <!-- Input y dropdown para seleccionar categorías -->
    <div class="relative">
      <input 
        type="text" 
        id="breakdown-category-filter-input" 
        class="w-full px-4 py-3 rounded-2xl ring-1 ring-slate-300/80 dark:ring-slate-700/80 bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 shadow focus:outline-none focus:ring-2 focus:ring-indigo-500/60 placeholder:text-slate-400 dark:placeholder:text-slate-500 transition-all" 
        data-i18n-placeholder="filter.placeholder"
        placeholder="Buscar categorías para filtrar..."
        autocomplete="off"
      >
      
      <!-- Dropdown para categorías -->
      <div id="breakdown-category-filter-dropdown" class="absolute z-20 mt-1 w-full bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg hidden max-h-48 overflow-y-auto">
        <!-- Las opciones se llenarán dinámicamente -->
      </div>
    </div>
  </div>

  <!-- Desglose por categorías -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold mb-4 text-slate-900 dark:text-slate-100" data-i18n="breakdown.byCategory">Por categoría</h2>
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-700 overflow-hidden">
      <div id="category-breakdown" class="divide-y divide-slate-200 dark:divide-slate-700">
        <!-- Los datos se cargarán dinámicamente -->
        <div class="p-4 text-center text-slate-500">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"></div>
          <p data-i18n="breakdown.loading">Cargando desglose...</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Desglose por descripción -->
  <div class="mb-8">
    <h2 class="text-xl font-semibold mb-4 text-slate-900 dark:text-slate-100" data-i18n="breakdown.byDescription">Por descripción</h2>
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-sm ring-1 ring-slate-200 dark:ring-slate-700 overflow-hidden">
      <div id="description-breakdown" class="divide-y divide-slate-200 dark:divide-slate-700">
        <!-- Los datos se cargarán dinámicamente -->
        <div class="p-4 text-center text-slate-500">
          <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto mb-2"></div>
          <p data-i18n="breakdown.loading">Cargando desglose...</p>
        </div>
      </div>
    </div>
  </div>
</div>