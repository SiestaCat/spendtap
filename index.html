<!doctype html>
<html lang="es" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>SpendTap</title>

    <!-- Tailwind CSS (no Bootstrap) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: [
                'ui-sans-serif',
                'system-ui',
                '-apple-system',
                'Segoe UI',
                'Roboto',
                'Inter',
                'Helvetica Neue',
                'Arial',
                'Noto Sans',
                'Apple Color Emoji',
                'Segoe UI Emoji',
                'Segoe UI Symbol',
                'Noto Color Emoji'
              ]
            }
          }
        }
      }
    </script>
    <style>
      /* Suaviza los números del input en iOS */
      input[type=number]::-webkit-outer-spin-button,
      input[type=number]::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
      input[type=number] { -moz-appearance: textfield; }
    </style>
  </head>
  <body class="h-full bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-950 text-slate-800 dark:text-slate-100">
    <div class="min-h-screen max-w-sm mx-auto flex flex-col p-4 pb-[calc(env(safe-area-inset-bottom)+1rem)]">
      <!-- Cabecera -->
      <header class="pt-4 text-center select-none">
        <h1 class="text-2xl font-semibold tracking-tight">SpendTap</h1>
        <p class="mt-1 text-sm text-slate-500 dark:text-slate-400">Octubre 2025</p>

        <!-- Botón cambio de tema -->
        <div class="mt-4 flex justify-center">
          <button id="themeBtn" type="button" class="inline-flex items-center gap-2 rounded-full px-4 py-2 text-sm shadow-sm ring-1 ring-slate-300/70 dark:ring-slate-700/70 bg-white/70 dark:bg-slate-800/60 backdrop-blur hover:shadow transition">
            <span id="themeIcon" class="inline-block"> 
              <!-- Icono inicial: sistema (laptop) -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5A1.5 1.5 0 0 0 4.5 18h15a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 19.5 6h-15A1.5 1.5 0 0 0 3 7.5v9Z"/><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5h18M8.25 18h7.5"/></svg>
            </span>
            <span id="themeLabel">Tema: Sistema</span>
          </button>
        </div>
      </header>

      <!-- Zona central: controles +/- input -->
      <main class="flex-1 flex flex-col items-center justify-center">
        <div class="flex flex-col items-center gap-6">
          <div class="flex items-stretch gap-3">
            <!-- Botón menos -->
            <button id="minusBtn" type="button" aria-label="Disminuir" class="size-14 rounded-2xl grid place-items-center ring-1 ring-slate-300/80 dark:ring-slate-700/80 bg-white dark:bg-slate-800 shadow hover:scale-[1.02] active:scale-95 transition">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h14"/></svg>
            </button>

            <!-- Input number -->
            <label class="sr-only" for="numberInput">Cantidad</label>
            <input id="numberInput" type="number" inputmode="numeric" min="0" step="1" value="1"
                   class="w-28 text-center text-3xl font-medium rounded-2xl ring-1 ring-slate-300/80 dark:ring-slate-700/80 bg-white dark:bg-slate-800 shadow px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500/60 selection:bg-indigo-500/20" />

            <!-- Botón más -->
            <button id="plusBtn" type="button" aria-label="Aumentar" class="size-14 rounded-2xl grid place-items-center ring-1 ring-slate-300/80 dark:ring-slate-700/80 bg-white dark:bg-slate-800 shadow hover:scale-[1.02] active:scale-95 transition">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14"/></svg>
            </button>
          </div>

          <!-- Botón Guardar -->
          <button id="saveBtn" type="button" class="inline-flex items-center gap-2 rounded-2xl px-5 py-3 text-base font-medium bg-indigo-600 text-white shadow hover:bg-indigo-500 active:scale-95 transition">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16.5l3.5-3.5M12 16.5l-3.5-3.5M12 16.5V4.5"/></svg>
            Guardar
          </button>
        </div>
      </main>

      <!-- Botón Ver mes (abajo del todo) -->
      <footer class="mt-8">
        <button id="viewMonthBtn" type="button" class="w-full inline-flex items-center justify-center gap-2 rounded-2xl px-5 py-3 text-base font-medium ring-1 ring-slate-300 dark:ring-slate-700 bg-white/80 dark:bg-slate-800/70 shadow hover:shadow-md transition">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.7" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M8 2v3M16 2v3M3.5 9.5h17M5 6h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z"/></svg>
          Ver mes
        </button>
      </footer>
    </div>

    <!-- Toast de guardado -->
    <div id="toast" class="pointer-events-none fixed inset-x-0 bottom-20 flex justify-center">
      <div class="hidden items-center gap-2 rounded-full bg-black/80 text-white px-4 py-2 text-sm shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
        <span>Guardado</span>
      </div>
    </div>

    <script>
      // === Tema (por defecto: sistema) ===
      const themeBtn = document.getElementById('themeBtn');
      const themeIcon = document.getElementById('themeIcon');
      const themeLabel = document.getElementById('themeLabel');

      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

      const Theme = {
        get() { return localStorage.getItem('theme') || 'system'; },
        set(mode) { localStorage.setItem('theme', mode); this.apply(mode); },
        apply(mode) {
          const root = document.documentElement;
          root.classList.remove('dark');
          if (mode === 'dark') root.classList.add('dark');
          if (mode === 'system') {
            if (prefersDark.matches) root.classList.add('dark');
          }
          // Actualiza UI
          if (mode === 'system') {
            themeLabel.textContent = 'Tema: Sistema';
            themeIcon.innerHTML = `
              <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.7' class='w-4 h-4'>
                <path stroke-linecap='round' stroke-linejoin='round' d='M3 16.5A1.5 1.5 0 0 0 4.5 18h15a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 19.5 6h-15A1.5 1.5 0 0 0 3 7.5v9Z' />
                <path stroke-linecap='round' stroke-linejoin='round' d='M3 16.5h18M8.25 18h7.5' />
              </svg>`;
          } else if (mode === 'light') {
            themeLabel.textContent = 'Tema: Claro';
            themeIcon.innerHTML = `
              <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.7' class='w-4 h-4'>
                <path stroke-linecap='round' stroke-linejoin='round' d='M12 3v2m0 14v2m9-9h-2M5 12H3m15.36 6.36l-1.42-1.42M7.05 7.05 5.64 5.64m12.02 0-1.41 1.41M7.05 16.95l-1.41 1.41' />
                <circle cx='12' cy='12' r='4'/>
              </svg>`;
          } else {
            themeLabel.textContent = 'Tema: Oscuro';
            themeIcon.innerHTML = `
              <svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='1.7' class='w-4 h-4'>
                <path stroke-linecap='round' stroke-linejoin='round' d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z' />
              </svg>`;
          }
        }
      };

      // Inicializa en sistema por defecto
      Theme.apply(Theme.get());

      // Reacciona a cambio del sistema si está en "sistema"
      prefersDark.addEventListener('change', () => {
        if (Theme.get() === 'system') Theme.apply('system');
      });

      // Toggle de tema: sistema -> claro -> oscuro -> sistema
      themeBtn.addEventListener('click', () => {
        const current = Theme.get();
        const next = current === 'system' ? 'light' : current === 'light' ? 'dark' : 'system';
        Theme.set(next);
      });

      // === Lógica +/- ===
      const minusBtn = document.getElementById('minusBtn');
      const plusBtn = document.getElementById('plusBtn');
      const numberInput = document.getElementById('numberInput');

      minusBtn.addEventListener('click', () => {
        const step = Number(numberInput.step) || 1;
        const min = numberInput.min === '' ? -Infinity : Number(numberInput.min);
        const val = Number(numberInput.value || 0) - step;
        numberInput.value = Math.max(val, min);
      });

      plusBtn.addEventListener('click', () => {
        const step = Number(numberInput.step) || 1;
        const val = Number(numberInput.value || 0) + step;
        numberInput.value = val;
      });

      // === Guardar (toast) ===
      const saveBtn = document.getElementById('saveBtn');
      const toast = document.querySelector('#toast > div');
      let toastTimer;

      saveBtn.addEventListener('click', () => {
        toast.classList.remove('hidden');
        clearTimeout(toastTimer);
        toastTimer = setTimeout(() => toast.classList.add('hidden'), 1400);
      });

      // Demo: Ver mes
      document.getElementById('viewMonthBtn').addEventListener('click', () => {
        alert('Aquí iría la vista mensual.');
      });
    </script>
  </body>
</html>
